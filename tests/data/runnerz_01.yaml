name: 基本三层模式
config:
  request:
    base_url: https://httpbin.org
    headers:
      token: abc123
  variables:
    a: 100
    b: 200
    c: ${add($a, $b)}

variables:
  d: 300

tests:
  - name: 接口测试用例
    steps:
      - name: 步骤1-GET请求
        request:
          url: /get
          method: GET
        extract:
          - u: content.url
        validate:
          - eq: [status_code, 200]
          - comparator: eq
            check: content.url
            expect: https://httpbin.org/get

      - name: 步骤2-POST请求
        skip: True
        request:
          url: /post
          method: POST
          data:
            a: $a
            b: 2
            u: $u
      - log: hello, $u
  - name: 测试用例2
    skip: True
    dubbo:
      host: 123
      port: 456
      service: abc
      method: def
      params:
        class: abc
        a: $a
        b: $b
  - name: 测试用例3
    tags: ['smoke', 'api']
    level: 1
    request:
      url: /get
      method: GET
